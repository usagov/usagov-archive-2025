/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
jQuery(document).ready(function(){"use strict";var imageMap={'icon-about':'/themes/custom/usagov/images/topics/ICONS_Reimagined_About_the_US_and_Its_Government.svg','icon-laws':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Laws_and_Legal_Issues.svg','icon-money':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Money.svg','icon-benefits':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Benefits.svg','icon-immigration':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Immigration.svg','icon-voting':'/themes/custom/usagov/images/topics/ICONS_Voting_and_elections_patriotic.svg','icon-military':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Military_and_Veterans.svg','icon-travel':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Travel.svg','icon-education':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Education.svg','icon-housing':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Housing.svg','icon-disasters':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Disasters_and_Emergencies.svg','icon-covid19':'/themes/custom/usagov/images/topics/ICONS_Reimagined_COVID19.svg','icon-health':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Health.svg','icon-scams':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Scams_and_Fraud.svg','icon-disability':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Disability_Services.svg','icon-jobs':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Jobs_and_Unemployment.svg','icon-business':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Small_Business.svg','icon-taxes':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Taxes.svg','icon-complaints':'/themes/custom/usagov/images/topics/ICONS_Complaints.svg','icon-life-events':'/themes/custom/usagov/images/topics/ICONS_Life_events.svg'};let options={"rootMargin":"0px","threshold":0.001};const lazyLoadingObserver=new IntersectionObserver((elements)=>{elements.forEach((element)=>{if(element.isIntersecting){var className,baseURL,relativePath,bg;className=element.target.getAttribute('data-bg');baseURL=window.location.origin;relativePath=imageMap[className];if(relativePath)bg=`url(${baseURL}${relativePath})`;if(bg&&bg!=='none'){element.target.style.backgroundImage=bg;lazyLoadingObserver.unobserve(element.target);}}});},options);for(const imgClass in imageMap)if(imageMap.hasOwnProperty(imgClass)){var imageElement=document.getElementsByClassName(`${imgClass} lazyload`)[0];if(imageElement)lazyLoadingObserver.observe(imageElement);}});;
function timestamp(){"use strict";var response=$("#g-recaptcha-response");if(response||response.value.trim()===""){var elems=JSON.parse(document.getElementsByName("captcha_settings")[0].value);elems["ts"]=JSON.stringify(new Date().getTime());document.getElementsByName("captcha_settings")[0].value=JSON.stringify(elems);}}setInterval(timestamp,500);function validateEmail(email){"use strict";var re=/\S+@\S+\.\S+/;return re.test(email);}function fieldValidation(){"use strict";var noErrors=true;$(".required").each(function(){var input=$(this).find("input,textarea");var errorId="error_"+input.attr("id");var alertErrorId="alert_"+errorId;var fieldElement=$("#"+input.attr("id"))[0];if(input.val()===""||(input.attr("id")==="email"&&!validateEmail(input.val()))){noErrors=false;if(!$(this).find("span.err-label").length){var error=input.attr("data-error");var label=$(this).find("label");label.after('<span id="'+errorId+'" class="err-label usa-error" tabindex="-1">'+error+"</span>");input.attr("aria-labelledby",label.attr("id")+" "+errorId);}fieldElement.classList.add("usa-user-error");fieldElement.parentElement.classList.add("usa-border-error");var alertBoxText=$("#"+alertErrorId)[0];alertBoxText?alertBoxText.classList.remove("usa-error--alert"):"";fieldElement.parentElement.classList.add("usa-form-spacing");}else{if($(this).find("span.err-label").length){var errorLabel=$(this).find("span.err-label");errorLabel?errorLabel.remove():"";fieldElement.classList.remove("usa-user-error");fieldElement.parentElement.classList.remove("usa-border-error");$("#"+alertErrorId)[0].classList.add("usa-error--alert");fieldElement.parentElement.classList.remove("usa-form-spacing");}}});if(!noErrors){var elem=document.querySelector(".err-label");var viewportOffset=elem.getBoundingClientRect();var top=viewportOffset.top;if(top<108)window.scrollTo(0,window.pageYOffset-(108-top));}return noErrors;}function modifyErrorElements(){'use strict';$("#error-box")[0].classList.remove("usa-error--alert");$("#error-box")[0].focus();var errors=document.querySelectorAll('[id*="alert_error_"]:not(.usa-error--alert)');if(errors.length===1)if(document.documentElement.lang==="en")$("#error-box")[0].getElementsByTagName("h2")[0].innerHTML="Your information contains an error";else $("#error-box")[0].getElementsByTagName("h2")[0].innerHTML="Su información contiene 1 error";else if(document.documentElement.lang==="en")$("#error-box")[0].getElementsByTagName("h2")[0].innerHTML="Your information contains "+errors.length+" errors";else $("#error-box")[0].getElementsByTagName("h2")[0].innerHTML="Su información contiene "+errors.length+" errores";if(errors.length>=4)$("#error-border")[0].classList.add("usa-main-border-error");else $("#error-border")[0].classList.remove("usa-main-border-error");if(errors.length<1)$("#error-box")[0].classList.add("usa-error--alert");}var submitPressed=function(){"use strict";var fieldValidationResult=fieldValidation();modifyErrorElements();return fieldValidationResult;};function onSubmit(token){"use strict";var formValidationResult=fieldValidation();if(formValidationResult===true)document.getElementById("myform").submit();};jQuery(document).ready(function(){"use strict";$("#pagesurvey-hdr").hide();$("#pagesurvey-trgt").hide();$("#pagesurvey-ombnum").hide();});;
var search_input=document.getElementById("search-field-en-small");const dir_search_results=document.getElementById("fed-dir-search-results");let lang=document.documentElement.lang;let search_term="";var allAgencies;function fetchAgencies(){if(lang=="es")return fetch("/sites/default/files/directory_report_federal_es").then((response)=>response.json());else return fetch("/sites/default/files/directory_report_federal").then((response)=>response.json());}function searchAgencies(allAgencies){var returnAgencies=[];var lowerCaseSearchTerm=search_term.toLowerCase();const firstWordExp=new RegExp("^"+lowerCaseSearchTerm+".*");const begWordExp=new RegExp(".* "+lowerCaseSearchTerm);const abbrExp=new RegExp(lowerCaseSearchTerm);allAgencies.forEach((agency)=>{var lowerCaseAgency=agency.agency_title.toLowerCase();if(lowerCaseAgency.match(firstWordExp)||lowerCaseAgency.match(begWordExp))returnAgencies.push(agency);else{if(agency.agency_acronym.toLowerCase().match(abbrExp))returnAgencies.push(agency);};});return returnAgencies;}function showAgencies(filteredAgencies){dir_search_results.innerText="";const usasearch_sayt=document.createElement("div");usasearch_sayt.classList.add("usasearch_sayt");usasearch_sayt.setAttribute("id","usasearch_sayt");const ul=document.createElement("ul");filteredAgencies.forEach((agency,index)=>{const resultBox=document.createElement("li");resultBox.classList.add("resultBox");resultBox.setAttribute("id",`resultBox${index}`);resultBox.setAttribute("role","option");const anchor=document.createElement("a");anchor.onclick=function(){search_input.value=agency.agency_title;};const type=agency.agency_type;if(type=="Federal Directory Record")anchor.href=agency.agency_url;else anchor.href=agency.synonym_url;if(agency.agency_acronym){anchor.innerText=`${agency.agency_title} (${agency.agency_acronym})`;anchor.acronym=agency.agency_acronym;}else anchor.innerText=agency.agency_title;resultBox.appendChild(anchor);ul.appendChild(resultBox);});usasearch_sayt.appendChild(ul);dir_search_results.appendChild(usasearch_sayt);}async function getAgencies(){try{if(!allAgencies)allAgencies=await fetchAgencies();let filteredAgencies=await searchAgencies(allAgencies);await showAgencies(filteredAgencies);}catch(status){}}function listen_for_clear_results(){const fed_dir_results=document.getElementById("usasearch_sayt");if(fed_dir_results)window.addEventListener("click",function(e){if(!fed_dir_results.contains(e.target))dir_search_results.innerText="";});}if(search_input)search_input.addEventListener("input",(e)=>{search_term=e.target.value;if(search_term!="")getAgencies();else dir_search_results.innerText="";listen_for_clear_results();});;
