/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
jQuery(document).ready(function(){"use strict";var imageMap={'icon-about':'/themes/custom/usagov/images/topics/ICONS_Reimagined_About_the_US_and_Its_Government.svg','icon-laws':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Laws_and_Legal_Issues.svg','icon-money':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Money.svg','icon-benefits':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Benefits.svg','icon-immigration':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Immigration.svg','icon-voting':'/themes/custom/usagov/images/topics/ICONS_Voting_and_elections_patriotic.svg','icon-military':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Military_and_Veterans.svg','icon-travel':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Travel.svg','icon-education':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Education.svg','icon-housing':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Housing.svg','icon-disasters':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Disasters_and_Emergencies.svg','icon-covid19':'/themes/custom/usagov/images/topics/ICONS_Reimagined_COVID19.svg','icon-health':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Health.svg','icon-scams':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Scams_and_Fraud.svg','icon-disability':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Disability_Services.svg','icon-jobs':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Jobs_and_Unemployment.svg','icon-business':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Small_Business.svg','icon-taxes':'/themes/custom/usagov/images/topics/ICONS_Reimagined_Taxes.svg','icon-complaints':'/themes/custom/usagov/images/topics/ICONS_Complaints.svg','icon-life-events':'/themes/custom/usagov/images/topics/ICONS_Life_events.svg'};let options={"rootMargin":"0px","threshold":0.001};const lazyLoadingObserver=new IntersectionObserver((elements)=>{elements.forEach((element)=>{if(element.isIntersecting){var className,baseURL,relativePath,bg;className=element.target.getAttribute('data-bg');baseURL=window.location.origin;relativePath=imageMap[className];if(relativePath)bg=`url(${baseURL}${relativePath})`;if(bg&&bg!=='none'){element.target.style.backgroundImage=bg;lazyLoadingObserver.unobserve(element.target);}}});},options);for(const imgClass in imageMap)if(imageMap.hasOwnProperty(imgClass)){var imageElement=document.getElementsByClassName(`${imgClass} lazyload`)[0];if(imageElement)lazyLoadingObserver.observe(imageElement);}});;
jQuery(document).ready(function($){"use strict";var docLang=[document.documentElement.lang];const hiddenLabel=docLang==="es"?"Elija o escriba el estado o territorio:":"Select or type your state or territory:";$("#comboBoxDiv").append(`<label class="visuallyhidden">${hiddenLabel}:<select class="usa-select usa-sr-only usa-combo-box__select" name="state-info" id="stateselect" aria-hidden="true" tabindex="-1"></select></label>`);$("#stateselect").append('<option value=""></option>');$("#statelist li a").each(function(){$("#stateselect").append('<option key="'+$(this).attr("key")+'"'+' value="'+$(this).attr("href")+'">'+$(this).text()+"</option>");});$("#comboBoxDiv").append('<input id="state-info" aria-autocomplete="list" aria-expanded="false" autocapitalize="off" autocomplete="off" class="usa-combo-box__input" type="text" aria-labelledby="state-info-label" role="combobox" data-test="stateInput" required>');$("#state-info").after('</span><span class="usa-combo-box__input-button-separator">&nbsp;</span><span class="usa-combo-box__toggle-list__wrapper" tabindex="-1"><button type="button" tabindex="0" class="usa-combo-box__toggle-list" aria-label="Toggle the dropdown list">&nbsp;</button></span><ul tabindex="-1" id="state-info--list" class="usa-combo-box__list" role="listbox" aria-labelledby="state-info-label" data-test="stateDropDown" hidden=""></ul><div class="usa-combo-box__status usa-sr-only" role="status"></div><span id="state-info--assistiveHint" class="usa-sr-only">When autocomplete results are available use up and down arrows to review and enter to select.Touch device users, explore by touch or with swipe gestures.</span>');const sumBtn=docLang==="es"?"Ir":"Go";$("#submitAfter").append(`<button class="usa-button sd-go-btn usa-button--secondary" type="submit">${sumBtn}</button>`);var goButton=$(".sd-go-btn");$("#statelist").remove();var url=$('#stateselect').val();var statename;goButton.click(function(){let stateData=new FormData(stateForm);let stateIsEmpty=$.isEmptyObject(stateData.get('state-info'));if(!stateIsEmpty){window.location.href=url;dataLayer.push({'event':'50_state_submit','50_state_url':url,'50_state_name':statename});}});$('#stateselect').on('change',function(){url=$(this).val();statename=$('#stateselect option:selected').text();});});;
var search_input=document.getElementById("search-field-en-small");const dir_search_results=document.getElementById("fed-dir-search-results");let lang=document.documentElement.lang;let search_term="";var allAgencies;function fetchAgencies(){if(lang=="es")return fetch("/sites/default/files/directory_report_federal_es").then((response)=>response.json());else return fetch("/sites/default/files/directory_report_federal").then((response)=>response.json());}function searchAgencies(allAgencies){var returnAgencies=[];var lowerCaseSearchTerm=search_term.toLowerCase();const firstWordExp=new RegExp("^"+lowerCaseSearchTerm+".*");const begWordExp=new RegExp(".* "+lowerCaseSearchTerm);const abbrExp=new RegExp(lowerCaseSearchTerm);allAgencies.forEach((agency)=>{var lowerCaseAgency=agency.agency_title.toLowerCase();if(lowerCaseAgency.match(firstWordExp)||lowerCaseAgency.match(begWordExp))returnAgencies.push(agency);else{if(agency.agency_acronym.toLowerCase().match(abbrExp))returnAgencies.push(agency);};});return returnAgencies;}function showAgencies(filteredAgencies){dir_search_results.innerText="";const usasearch_sayt=document.createElement("div");usasearch_sayt.classList.add("usasearch_sayt");usasearch_sayt.setAttribute("id","usasearch_sayt");const ul=document.createElement("ul");filteredAgencies.forEach((agency,index)=>{const resultBox=document.createElement("li");resultBox.classList.add("resultBox");resultBox.setAttribute("id",`resultBox${index}`);resultBox.setAttribute("role","option");const anchor=document.createElement("a");anchor.onclick=function(){search_input.value=agency.agency_title;};const type=agency.agency_type;if(type=="Federal Directory Record")anchor.href=agency.agency_url;else anchor.href=agency.synonym_url;if(agency.agency_acronym){anchor.innerText=`${agency.agency_title} (${agency.agency_acronym})`;anchor.acronym=agency.agency_acronym;}else anchor.innerText=agency.agency_title;resultBox.appendChild(anchor);ul.appendChild(resultBox);});usasearch_sayt.appendChild(ul);dir_search_results.appendChild(usasearch_sayt);}async function getAgencies(){try{if(!allAgencies)allAgencies=await fetchAgencies();let filteredAgencies=await searchAgencies(allAgencies);await showAgencies(filteredAgencies);}catch(status){}}function listen_for_clear_results(){const fed_dir_results=document.getElementById("usasearch_sayt");if(fed_dir_results)window.addEventListener("click",function(e){if(!fed_dir_results.contains(e.target))dir_search_results.innerText="";});}if(search_input)search_input.addEventListener("input",(e)=>{search_term=e.target.value;if(search_term!="")getAgencies();else dir_search_results.innerText="";listen_for_clear_results();});;
